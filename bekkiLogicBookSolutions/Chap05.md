# 5.15: 形式化
1) ∀n n∈N → ∃m m∈N ∧ m>n
2) ∀p Prime(p) → ∀n∃m (n∈N ∧ m∈N ∧ n = n^p-p*m) なお述語Primeは教科書で定義したもの
3) ￢ Converge(an) なお述語Convergeは教科書で定義したもの

# 5.20: 自由変項・束縛変項
1) 自由: {x}, 束縛: {}
2) 自由: {y}, 束縛: {x,y,z}
3) 自由: {}, 束縛: {x}
4) 自由: {x,y}, 束縛: {x}
5) 自由: {}, 束縛: {x}

# 5.27: 衝突しそうな代入
定義5.23 での2つに場合分けを「不変パターン」「代入できるパターン」と呼ぶ。代入できるパターンの衝突回避条件を「条件A」, 「条件B」と名前をつける。

- ∀xF(f(x), y) [不変パターン]
- ∀yF(f(z), y) [条件A:NG 条件B:OK]
- ∀xF(f(y), z) [不変パターン]
- ∀yF(f(y), z) [条件A:OK 条件B:NG]
- ∀yF(f(y), z) [条件A:OK 条件B:OK]
- ∀z(F(f(x), z))[y/x] ≡ ∀zF(f(y), z) [条件A:NG 条件B:NG, 新たな変数z を導入]

# 5.30: 部分項
{1, 2, x}

# 5.32: ゲーデル数化の単射性
二つの記号列 s1s2..sn とt1t2....tm が同じ数値 a に対応付けられたとする。a の素因数分解の一意性により s1=t1, s2=t2, ... より、二つの記号列は同一である。

# 5.36: 代入での深さ不変性
任意の個数の変数に対する代入を S とおく。より一般化した言明「任意のφ, S に対して φ と φ[S] の深さが一致する」を示す方が簡単。

Step1[φが基本述語]: φ=θ(τ1,τ2,...)とする。dφ = dθ(τ1,..) = 1 だし、dSφ= dθ(τ1[S], τ2[S], ...) = 1 なので、深さは一致。

Step2[φが複合論理式]: φ の深さ未満の式で 示す式が成立すると仮定(IH)。φは真理関数によって書けるか、量化子によって書けるかのいずれかである。

Case2A[真理関数ρ]: φは、φより深さが小さいn個の式 φ1,φ2,...φn をつかって、φ = ρ(φ1,...) と書ける。dρ(φ1,φ2,...) = max(dφ1,dφ2,...dφn) = max(dφ[S], dφ2[S],...) = dρ(φ[S]) となり（max同士の等号にIHをn回利用）代入による深さは不変。

Case2B[量化子Q]: 量化子Q(=∀or∃)を使って、φ=Qζψ と書ける。φに代入S を行う際には、ζ, S に応じて場合分けが必要であるが、いずれの場合にも、Qζφ[S] = Qη ψ[S']　の形となる(定義5.34, 5.37)ので dφ[S] = 1+dψ[S'] = 1+dψ = dφ (最後の一つ前の等号にIHを利用)。

以上Step1,2 により示された。

# 5.39: 証明の補完
証明の「全称量化論理式∀ξφの場合:...」以降の記述に登場する∀という記号を∃という記号に機械的に置き換えたものが証明として成立する。

# 5.40: 代入と自由変数
Step1. [定項/変項] σが定数の場合自明に従う（fv(σ[τ/ξ])= {} = fv(σ)）。σが変数の場合は、σ=ξの時とそうでないときで場合分け。σ=ξの場合、示したい式の1番目のケースに該当するが、fv(σ[τ/ξ])=fv(τ), (fv(σ)-{ξ})∪fv(τ)={}∪fv(τ)=fv(τ) となるので、従う。σ≠ξの場合は示したい式の2番目のケースに該当するが、fv(σ[τ/ξ])=fv(σ)となるので従う。

Step2. [演算子g] 任意の n項演算子 gと 任意の n個の項 τ1, ...τn に対し、X = fv(g(τ1,τ2,..τn)[τ/ξ]) = fv(τ1[τ/ξ])∪fv(τ2[τ/ξ)..., Y = fv(g(τ1,τ2,..τn)) = fv(τ1)∪fv(τ2)... を場合分けして考える。

Case2A) 全ての i=1,2,...n に対し ξ∉fv(τi) の場合。示したい式の2番目に相当するので、X = Y を示せばよい。IHより、fv(τ1[τ/ξ]) =fv(τ1)などとなるので X= fv(τ1)∪fv(τ2)∪...fv(τn) = fv(g(τ1, τ2...τn)) = Y となり示せた。

Case2B) i=1,2,...n のいずれか一つ以上において ξ∉fv(τi)である場合。示したい式の1番目に相当するので、X = (Y-{ξ})∪fv(τ) を示せばよい。IHより X の該当箇所が (fv(τi)-{ξ})∪fv(τ) となり、それ以外の箇所は fv(τj) となる。∪の順序を入れ替えてfv(τ) を一番右側に持ってくる。何回 fv(τ) を和集合しても fv(τ) であるので、結局 X = (fv(τ1))∪...∪(fv(τj)-{ξ})...∪(fv(τn))∪fv(τ) = (Y-{ξ})∪fv(τ) となりこの場合でも示された。

以上Step1,2より示された

# 5.41: 代入と自由変数
Step1. [基本述語θ] φ=θ(τ1,τ2,...τn)とする。fv(φ[τ/ξ])=fv(θ(τ1[τ/ξ], τ2[τ/ξ], ...))=fv(τ1[τ/ξ])∪fv(τ2[τ/ξ])∪...となり項の自由変数の話に帰着。場合分け。Case1A: i=1,2,...n の1つ以上の i に対し ξ∈fv(τi) の場合。示すべき式の1行目に対応するが、各部分に5.40の結果を用いると同時に、5.40のStep2でやった議論を繰り返すと、上述の式は ((fv(τ1)∪fv(τ2)∪...)-{ξ})∪fv(τ) = (fv(θ(τ1,...))-{ξ})∪fv(τ) となり、示された。Case2B: i=1,2...nの全てについて ξ∈fv(τi)の場合。これは示すべきの2行目に対応するが、5.40の結果を用いると直ちに従う。

Step2. Case2A:[真理関数ρ] φ=ρ(φ1,..,φn)のとき。fv(ρ(..))=fv(φ1)∪fv(φ2)∪... となるが、IHを使うとほぼ自明にしたがう（Step1での項の論証が、ここで式の論証としてそのまま使える）。

Case2B:[量化子Q]。∀と∃で全く同じ論証が成り立つので Q とまとめて話を進める。

Case2B1:[ξで量化]。 ξ∈fv(φ)の場合、fv((Qξφ)[τ/ξ])=fv(Qξ φ[τ/ξ]) = fv(φ[τ/ξ])-{ξ} = (fv(φ)-{ξ})∪fv(τ) = fv(Qξφ)∪fv(τ) より示された(最後の一つ前の等号でIH)。ξ∉fv(φ)の場合、fv((Qξφ)[τ/ξ]) = fv(Qξ φ[τ/ξ]) = fv(φ[τ/ξ])-{ξ} = fv(φ)-{ξ} = fv(Qξφ) となり示された(最後の一つ前の等号でIH)。

Case2B2:[ζ≠ξで量化,非衝突] ξ∉fv(φ)またはζ∉fv(τ)の場合。fv((Qζφ)[τ/ξ]) = fv(Qζ φ[τ/ξ]) = fv(φ[τ/ξ])-{ζ} = fv(φ[τ/ξ])-{ζ} 。場合分け。ξ∉fv(φ)の場合、IHを使って計算を進めて、...= fv(φ)-{ζ} = fv(Qζφ) となり 示された。ξ∈fv(φ)の場合（Case2B2の前提よりζ∈fv(τ)となることに注意）、IHを使って計算を続けて ...= ((fv(φ)-{ξ})∪fv(τ))-{ζ} = (fv(Qζφ)-{ζ}-{ξ})∪(fv(τ)-{ζ}) = (fv(Qζφ)-{ξ})∪fv(τ) となり 示された。

Case2B3:[ζ≠ξで量化,衝突] ξ∈fv(φ) かつ ζ∈fv(τ)の場合。η∉fv(φ)∪fv(τ) なる変数ηを用いて、(Qζφ)[τ/ξ] = Qη φ[η/ζ][τ/ξ] 。よって fv((Qζφ)[τ/ξ]) = fv(φ[η/ζ][τ/ξ])-{η} となるが、ξ∈fv(φ[η/ζ]) なので(注：省略しているがこれもIHからの帰結) φ[η/ζ] に関するIHを使って計算を進めて、...= (fv(φ[η/ζ])-{ξ})∪fv(τ) -{η}
= (fv(Qηφ[η/ζ])-{ξ}-{η})∪(fv(τ) -{η})
= (fv(Qηφ[η/ζ])-{ξ})∪(fv(τ)-{η})
= (fv(Qζφ)-{ξ})∪fv(τ)
となり示せた（最後の等号に5.25を利用）。

以上Step1,2 から示せた。

# 5.43 代入に関する性質
問題1. Step1: [基本述語θ] φ=θ(τ1,..τn) としてよい。φ[ξ/ξ] = θ(τ1[ξ/ξ], ...)となるので、言明S:「任意の項τに対して τ[ξ/ξ]=τ」を示せばよい。言明Sについて項に関する帰納法を使えばよいがほぼ自明なのでその証明は略。

Step2: [複合論理式] Case2A: [真理関数ρ] ρ(φ1,..φm)[ξ/ξ] = ρ(φ1[ξ/ξ],...) = ρ(φ1,φ2, ...) となり示せた。Case2B: [ξで量化] (∀ξφ)[ξ/ξ]=∀ξ φ[ξ/ξ]=∀ξφ より示せた。Case2C: [ζ≠ξで量化,非衝突]（∀ζφ)[ξ/ξ]=∀ζ φ[ξ/ξ]=∀ζφ より示せた。Case2D: [ζ≠ξで量化,衝突] ζ∉fv(ξ) なので衝突しない。

以上Step1,2より示せた。  

---
問題2. 示すべきが A(φ) ⇒ B(φ) という形式で今までと違うので論証の方法に注意

Step1: [基本述語θ] φ=θ(τ1,..τn) とおく。fvφ= fv(τ1)∪fv(τ2)...であるので 示す式の前提は ξ∉fv(τi) ただしi=1,2,... となる。この下で φ[τ/ξ]=θ(τ1[τ/ξ], ...)=θ(τ1,τ2,...)=φ。よって示された。

Step2: Case2A[真理関数ρ]: fv(ρ(φ1,...))=fv(φ1)∪fv(φ2)...であるので、示す式の前提は ξ∉fv(φi) ただしi=1,2,... となる。これは、φi に関する IHの前提が成立することを示す。この下で ρ(φ1,..)[τ/ξ] = ρ(φ1[τ/ξ],...) = ρ(φ1,φ2, ...)。

Case2B[ξで量化]: fv(Qξφ)=fv(φ)-{ξ} により、示す式の前提から ξ∉fv(φ) が言える。これはφ に関するIH の前提を満たす。よって、(Qξφ)[τ/ξ] = Qξ φ[τ/ξ] = Qξφ となり示された。

Case2C[ζ≠ξで量化,非衝突]: fv(Qζφ)=fv(φ)-{ζ} により、示す式の前提から ξ∉fv(φ) が言える。これはφ に関するIH の前提を満たす。(Qζφ)[τ/ξ] = Qζ φ[τ/ξ] = Qζφ。

Case2C[ζ≠ξで量化,衝突]: 示すべき式の前提から、衝突しない。

---
問題3. 
ξ=ζの場合は、問題1,2 の結果より明らかに従うので、ξ≠ζとしてよい。

Step1: [基本述語θ] φ=θ(τ1,..τn) とおく。fvφ= fv(τ1)∪fv(τ2)...であるので 示す式の前提は ζ∉fv(τi) ただしi=1,2,... となる。この下で φ[ζ/ξ][τ/ζ] = θ(τ1[ζ/ξ][τ/ζ],..τn[ζ/ξ][τ/ζ])=θ(τ1[τ/ξ],τ2[τ/ξ],...)=φ[τ/ξ]。よって示された（項に関する言明「ζ∉fv(τ0) ⇒ τ0[ζ/ξ][τ/ζ] = τ0[τ/ξ]」を使ったが、これは別途証明が必要）。

Step2.
Case2A[真理関数ρ]: fv(ρ(φ1,...))=fv(φ1)∪fv(φ2)...であるので、示す式の前提は ζ∉fv(φi) ただしi=1,2,... となり、φi に関して IHの前提が満たされるので IHの帰結が使える。この下で ρ(φ1,..φm)[ζ/ξ][τ/ζ]=ρ(φ1[ζ/ξ][τ/ζ], ...) = ρ(φ1[τ/ξ], ...) = ρ(φ1,..φm)[τ/ξ]。

Case2B[ξで量化]: 仮定 ζ∉fv(Qξφ) と ξ≠ζ は ζ∉fv(φ) を含意するので、IHの帰結部 φ[ζ/ξ])[τ/ζ]=φ[τ/ζ] を使ってよい。よって、((Qξφ)[ζ/ξ])[τ/ζ] = (Qξφ)[τ/ζ] = Qξ φ[τ/ζ] = Qξφ。一方、(Qξφ)[τ/ξ] = Qξφ。 よって示された。

Case2C[ζで量化]: 仮定 ζ∉fv(Qζφ) は満たされえないので、示さなくてよい。

Case2D[η≠ξ,ζで量化]: ζ∉fv(Qηφ) を仮定。少し変形して ζ∉fvφ -{η} となるが、これは、η≠ζであるので ζ∉fvφを含意し、IHより φ[ζ/ξ][τ/ζ] = φ[τ/ξ] を使ってよい。

Case2D1:[非衝突] η∉fv(τ)またはξ∉fv(φ) の場合。(Qηφ)[τ/ξ] = Qη φ[τ/ξ]となる。一方、((Qηφ)[ζ/ξ])[τ/ζ] = (Qη φ[ζ/ξ])[τ/ζ]。η∉fv(τ)の時は計算がさらに進み = Qη φ[ζ/ξ][τ/ζ] = Qη φ[τ/ξ] となり示せる。ξ∉fv(φ) の時も、φ[ζ/ξ]=φ となるから計算が進み = (Qηφ)[τ/ζ] = Qη φ[τ/ζ] = Qηφ となり、右辺もさらに計算できて Qη φ[τ/ξ] = Qηφ となり一致する。

Case2D2:[衝突] η∈fv(τ)かつξ∈fv(φ)の時。v∉fv(τ)∪fv(φ)∪{ζ}なる 変数v を使うと、
((Qηφ)[ζ/ξ])[τ/ζ] 
= (Qη φ[ζ/ξ])[τ/ζ] 
= Qv φ[v/η][ζ/ξ][τ/ζ] 
ここで ζ∉fvφ (Case2Dに記載) は 5.41 を利用すると ζ∉fv(φ[v/η]) を含意するので、IH が使えて φ[v/η][ζ/ξ][τ/ζ] = φ[v/η][τ/ξ]。よって計算を進めて ..= Qv φ[v/η][τ/ξ] = (Qηφ)[τ/ξ] となり示された。

# 5.48: 述語の解釈の種類数
n項述語なので、入力は |Dm|^n あり、それぞれに 0 or 1 を割り当てる自由度がある。2^(|Dm|^n)

# 5.55: 命題の記号化
1) 「∀(奇数(x)∧奇数(x^2))」： x ↦ 0 なる割り当てを持つ解釈で 量化子の内側が 0 になる。よって 式全体で 0 となる（ ∀x(奇数(x)→奇数(x^2)) とすべきだった）

2) 「∃x (奇数(x)→奇数(x^2)」: x ↦ 0 を何を割り当てても、x ↦ 1 を割り当てても、引いていえば任意の値で量化子の内側は 1 になる。（ ∃x(奇数(x)∧奇数(x^2)) とすべきだった）

# 5.58: 変異の順序の任意性
5.57 を何度か使えばよい
```
  g[x↦a][y↦b][z↦c] 
= g[x↦a][z↦c][y↦b] 
= g[z↦c][x↦a][y↦b] 
= g[z↦c][x↦b][y↦a]
```

# 5.60: 証明の補完
注：5.59の∀に関する部分と同様な論証でできる。

Case1[ξで量化]: 存在量化論理式 ∃ξφの場合。示すべきは

```
ξ∉fv(∃ξφ) ⇒ 〖∃ξφ〗@M,g =〖∃ξφ〗@M,g[ξ↦a]
```

上記の前提は常に成立する（のでヒントゼロ）。帰結部に関して、

```
〖∃ξφ〗@M,g[ξ↦a]=1 
⇔ ある b∉DM で 〖φ〗@M,g[ξ↦a][ξ↦b]=1 
⇔ ある b∉DM で〖φ〗@M,g[ξ↦b]=1 
⇔ 〖∃ξφ〗@M,g =1
```

よって示せた。

Case2[ζ≠ξで量化]: 存在量化子 ∃ζφの場合。示すべきは

```
ξ∉fv(∃ζφ) ⇒ 〖∃ζφ〗@M,g = 〖∃ζφ〗@M,g[ξ↦a]
```

前提部は ξ∉fv(φ)-{ζ} なので ξ∉fv(φ) を含意するから、 IH の前提を満足し、帰結部〖φ〗@M,g=〖φ〗@M,g[ξ↦a] を利用してよい。よって、

```
〖∃ζφ〗@M,g[ξ↦a] = 1 
⇔ ある b∉DM で〖φ〗@M,g[ξ↦a][ζ↦b] = 1 
⇔ ある b∉DM で〖φ〗@M,g[ζ↦b] = 1 
⇔〖∃ζφ〗@M,g = 1
```
 となって、示せた。

# 5.62: 証明の補完（代入と変異を結ぶ式）
「全称量化式∀ξφの場合」以下証明の最後までの段落の論証において、機械的に以下の処方をすれば、そのまま証明になる

- `∀` を `∃` で置き換える
- `すべての` を `ある` で置き換える

# 5.65: 外延性の証明
```
〖φ[τ1/ξ]〗@M,g 
=〖φ〗@M,g[ξ↦〖τ1〗@M,g] 
=〖φ〗@M,g[ξ↦〖τ2〗@M,g]  (仮定を利用)
=〖φ[τ2/ξ]〗@M,g
```

# 5.82: 証明
5.71 に τ=ξ, ψ=φ を適用すると、「φ⊨φ ⇒ ∀ξφ⊨φ」となる。同一律よりこの前提は満たされるので、∀ξφ⊨φ が示される。

5.72 に Γ={φ}, τ=ξ を適用すると、「φ⊨φ ⇒ φ⊨∃ξφ」となる。同一律よりこの前提は満たされるので、φ⊨∃ξφ が示される。

5.73 に Γ={φ}, ζ=ξ を適用すると、「φ⊨φ ⇒ φ⊨∀ξφ」となる。制約は ξ∉fv(φ)∪fv(∀ξφ)となるが、これは仮定から満たされる。同一律より前提が満たされるので、φ⊨∀ξφ が示される。

5.74 に ζ=ξ, ψ=φ を適用すると、「φ⊨φ ⇒ ∃ξφ⊨φ」となる。制約はξ∉fv(∃ξφ)∪fv(φ)となるが、これは仮定から満たされる。同一律より前提が満たされるので、∃ξφ⊨φ が示される。

以上の4つより、ξ∉fv(φ)のもとで ∀ξφ ≡ φ ≡ ∃ξφ が示された。

# 5.84: 証明
⇒の証明：
```
01: ￢￢φ[ζ/ξ] ⊨ φ[ζ/ξ]    [二重否定除去]
02: φ[ζ/ξ] ⊨ ∃ξφ           [存在汎化]
03: ￢￢φ[ζ/ξ] ⊨ ∃ξφ       [カット02 by 01]
04: ￢￢φ[ζ/ξ], ￢∃ξφ ⊨ ⊥  [03の背理法]
05: ￢∃ξφ　⊨ ￢φ[ζ/ξ]      [04の背理法]
06: ￢∃ξφ　⊨ ∀ξ￢φ         [全称導入律, OK: ξ∉fv(￢∃ξφ)∪fv(∀ξ￢φ)]
```

⇐の証明:
```
01: ∀ξ￢φ ⊨ ￢φ[ζ/ξ]              [全称例化]
02: ￢φ[ζ/ξ], ￢￢φ[ζ/ξ] ⊨ ⊥      [α∧￢α↔⊥より]
03: ∀ξ￢φ, ￢￢φ[ζ/ξ] ⊨ ⊥         [カット02 by 01]
04: ∀ξ￢φ ⊨ ￢φ[ζ/ξ]              [03の背理法]
05: ￢φ[ζ/ξ] ⊨ ∃ξ￢φ              [存在汎化]
06: ∀ξ￢φ ⊨ ∃ξ￢φ                 [カット05 by 04 or 推移律]
```

# 5.86
ξ ∉ fv(φ) より、 φ ≡ ∀ξφ ≡ ∃ξφ である(5.81)。

また、∀ξ(α∧β) = ∀ξα ∧ ∀ξβ などは、以下のように証明できる:

```
〖Qξ(α〇β)〗@M,g = 1 (Q=∀or∃, 〇=∧or∨)
⇔すべての/ある a∈DM において〖(α〇β)〗@M,g[ξ↦a] = 1
⇔すべての/ある a∈DM において〖α〗@M,g[ξ↦a] = 1 かつ/または〖β〗@M,g[ξ↦a] = 1
⇔〖Qξα〗@M,g = 1 かつ/または 〖Qξβ〗@M,g = 1
```

よって証明は以下：

```
φ ∧ ∀ξψ ≡ ∀ξφ ∧ ∀ξψ ≡ ∀ξ(φ∧ψ) (1問目)
φ ∧ ∃ξψ ≡ ∃ξφ ∧ ∃ξψ ≡ ∃ξ(φ∧ψ) (2問目)
φ ∨ ∀ξψ ≡ ∀ξφ ∨ ∀ξψ ≡ ∀ξ(φ∨ψ) (3問目)
φ ∨ ∃ξψ ≡ ∃ξφ ∨ ∃ξψ ≡ ∃ξ(φ∨ψ) (4問目)
```

# 5.88: α同値性
ξ=ζの場合自明に従うので、ξ≠ζとしてよい。

また、5.87 より ζ ∉ fv(φ) のもと、以下を使える:
```
〖φ[ζ/ξ]〗@M,g[ζ↦a] = 〖φ〗@M,g[ξ↦a]
```
よって
```
〖∃ξφ〗@M,g = 1 
⇔ ある a∉DM について〖φ〗@M,g[ξ↦a] = 1 
⇔ ある a∉DM について〖φ[ζ/ξ]〗@M,g[ζ↦a] = 1 
⇔〖∃ζφ[ζ]/ξ〗@M,g = 1
```

# 5.90: 置き換えの公式
示すべき式はψとφに関して対称なので、⇒のみ示せば十分。

```
φ[ξ/ξ] ⊨ ψ         [前提と定理5.42 より]
φ[ξ/ξ] ⊨ ∃ξψ       [存在導入]
∃φ ⊨ ∃ψ            [存在除去, 制約OK: ξ∉fv(∃ξφ)∪fv(∃ξψ)]
```

# 5.91: 置き換えの実例
二重否定除去より:
```
∀xF(x) ≡ ∀x(￢￢F(x))
```
よって、
```
∀xF(x)∧G(a) ≡ ∀x(￢￢F(x))∧G(a)
```

# 5.93: 
2番目の式の証明:
```
φ∧∃ξψ∧χ 
≡ (φ∧χ)∧∃ξψ    [結合律・交換律と置き換え] 
≡ ∃ξ(φ∧χ∧ψ)    [定理5.85, 制約条件も満たしている]
≡ ∃ξ(φ∧ψ∧χ)    [結合律・交換律と置き換え]
```
3番目の式と4番目の式はまとめて証明する。量化子をQで表現する。ξ∈fv(φ)∪fv(ψ)より、ξ∉fv(φ) と ξ∉fv(ψ)が成立。
```
φ∨Qξψ∧χ
≡ (φ∧χ)∨(Qξψ∧χ)    [分配律と置き換え]
≡ (φ∧χ)∨Qξ(ψ∧χ)    [定理5.85と置き換え; 制約条件も満たす]
≡ Qξ((φ∧χ)∨(ψ∧χ))  [定理5.85と置き換え; 制約条件も満たす]
≡ Qξ(φ∨ψ∧χ)        [分配律と置き換え]
```

# 5.94: →の同値関係
```
1) 左辺 ≡ ￢φ∨∀ξψ ≡ ∀ξ(￢φ∨ψ) ≡ 右辺
2) 左辺 ≡ ￢φ∨∃ξψ ≡ ∃ξ(￢φ∨ψ) ≡ 右辺
3) 左辺 ≡ ￢∀ξφ∨ψ ≡ ∃ξ(￢φ)∨ψ ≡ ∃ξ(￢φ∨ψ) ≡ 右辺
4) 左辺 ≡ ￢∃ξφ∨ψ ≡ ∀ξ(￢φ)∨ψ ≡ ∀ξ(￢φ∨ψ) ≡ 右辺
```

# 5.95: 冠頭標準形への変形

```
1) ∃xFx ⋁ ¬∀xFx 
≡ ∃x(Fx ⋁ ¬∀yFy) 
≡ ∃x(Fx ⋁ ∃y¬Fy) 
≡ ∃x∃y(Fx⋁¬Fy)

2) (∀x(Fx→Gx) ∧ ∃xFx∧Hx ) → ∃x(Gx∧Hx) 
≡ ∀x((Fx→Gx)∧∃y(Fy∧Hy)) → ∃x(Gx∧Hx)
≡ ∀x∃y((Fx→Gx)∧(Fy∧Hy)) → ∃z(Gz∧Gz)
≡ ∀x∃y∃z(((Fx→Gx)∧Fy∧Hy) → Gz∧Hz)

3) ∀x(Fx∧Gx) ↔ ∀xFx∧∀xGx
≡ ∀z(Fz∧Gz) ↔ ∀x∀y(Fx∧Gy)
≡ ∀x∀y∃z(Fz∧Gz → Fx∧Gy) ∧ ∀z∃x∃y(Fx∧Gy → Fz∧Gz)
≡ ∀x∀y∃z(Fz∧Gz → Fx∧Gy ∧ ∀z∃x∃y(Fx∧Gy → Fz∧Gz))
≡ ∀x∀y∃z∀w∃u∃v((Fz∧Gz→Fx∧Gy)∧(Fu∧Gv→Fw∧Gw))

4) ∃x∀y∃zFxyz → ∃x∀y∃zFyzx
≡ ∃x∀y∃zFxyz → ∃u∀v∃wFvwu
≡ ∀x∃y∀z(Fxyz → ∃u∀v∃wFvwu)
≡ ∀x∃y∀z∃u∀v∃w(Fxyz→Fvwu)
```

# 5.99 
⇒の証明: ∀xψ[fx/y] ⊨ ∀x∃yψ を示せば、カット(or 推移律)より証明できる（注: ∀x は ∀x1∀x2...∀xn の略記, fx/y は f(x1,...xn)/y の略記)。

```
ψ[fx/y] ⊨ ψ[fx/y]     [同一律]
ψ[fx/y] ⊨ ∃yψ         [存在導入(5.72)]
∀xψ[fx/y] ⊨ ∃yψ       [全称除去(5.71)]
∀xψ[fx/y] ⊨ ∀x∃yψ     [全称導入(5.73) OK: x∉fv(∀xψ[fx/y])∨(∀x∃yψ)]
∀x∃yψ ⊨               [仮定]
∀xψ[fx/y] ⊨           [仮定をカット]
```

⇐の証明: 対偶を証明。

```
∀x∃yψ ⊭
⇔ 〖∀x∃yψ〗 = 1 なる <M,g> が存在
⇔ 任意の a=(a1,a2,..)∈(DM)^n に対して〖∀x∃yψ〗@M,g[x↦a][y↦b] = 1 なるb が存在
```
この対応（ (a1,...an) ↦ b ) の関数 f' を、n項述語 f の M における割り当てとみなす形で f を定義する。この下で

```
〖ψ[fx/y]〗@M,g[x↦a]
= 〖ψ〗@M,g[x↦a][y↦f'(a)]
= 1
```

となり ∀xψ[fx/y] は充足可能であり、 ∀xψ[fx/y] ⊭ が示された。

# 5.106:

⇒の証明: 自明

⇐の証明: 対偶を示す。 φ⊭ とする。すなわち φ が充足可能であるので、φ を充足するエルブラン解釈<H,h> が存在する(5.104)。よって 〖φ〗@H,h = 1 となるので、示された。

# 5.108: 
述語論理の式 φ における部分式において 真理関数を含まないものを φi=θi(τi1,τi2,...) (i=1,...,n) とする(要はφを構成する基本述語を持ってきた)。φi を、原子命題記号 ψi に置き換えた式が ψ=ρ(φ) である(φは量化子を含まないから) 

エルブラン解釈<H,h> と命題論理の解釈 I に〖φi〗@H,h = 〖ψi〗@I となる関係が成立しているとすると、命題論理と述語論理の真理関数の意味論が同じのため〖φ〗@H,h = 〖ψ〗@I となる。

⇒の証明: 任意の解釈、すなわち〖ψi〗(i=1,..n) の値付けが 任意に与えられたときに、対応するエルブラン解釈が存在することを示せば十分。上記の関係式を満たすようにθの構造を定めたエルブラン解釈が、それである。

⇐の証明: 任意のエルブラン解釈、すなわち〖φi〗(i=1,..n) に対する値付けが任意に与えられたとき、対応する 命題論理の解釈が存在することを示せばよい。上記の関係式を満たす〖ψi〗の組み合わせがその解釈である。

# 5.112:
⇒の証明: 対偶を示す。対偶の前提より 任意の自然数 m に対して 〖∧( φ[τi1/x1][..] )〗 = 0 が成立しない。よって 任意の自然数 m 、 任意の m×n 個の項に対して〖∧( φ[τi1/x1][..] )〗= 1 となるようなエルブラン解釈が存在する。これは、集合S :={ φ[τ1/x1][...] | τ1,... ∈ HA } の任意の有限集合が充足可能であることを示すので、コンパクト定理より S も充足可能。そのような解釈を <H,h> とする。

```
全ての τ1,..∈HA〖φ[τ1/x1]...〗@H,h = 1
⇔ 全ての τ1,..∈HA で〖φ〗@H,h[x1↦τ1][...] = 1
⇔ 〖∀x1..∀xnφ〗@H,h = 1
```

よって、少なくとも解釈 <H,h> の下では ∀x1..∀xnφ は充足するので、「 ∀x1..∀xnφ ⊭」が示された。

⇐の証明: 任意のエルブラン解釈において値が 0 であり、かつφに量化子が含まれないので5.105より、 ∧(φ[τi1/x1][...]) ⊨  が成立するが、つまり　{ φ[τi1/x1][..][τin/xn] | i=1,2,..m } ⊨ ということである。この前提 m 個に対してカットを適用したい。つまり、m 個の全称例化「∀x1..∀xnφ ⊨ φ[τi1/x1]...[τin/xn]」を使えばよい。よってカットより、∀x1..∀xnφ ⊨ となり示された。
