# はじめに

- 本回答集では テキストファイルでの表現という制約上以下
    - 意味論的同値性（⊨とその鏡像の合併記号）を ≡ で表記する
    - 意味論的値は 〖P〗@I と表記する。ここで I は解釈の名前

# 3.20: 部分式の列挙
- SubF P = {P}
- SubF Q = {Q}
- SubF (P∧Q) = {P∧Q, P, Q}
- SubF ((P∧Q)∨￢R) = {(P∧Q)∨￢R, P∧Q, P, Q, ￢R, R}
- SubF (⊤∧￢⊥) = {⊤∧￢⊥, ⊤, ￢⊥, ⊥}
- SubF (￢P↔Q) = {￢P↔Q, ￢P, P, Q}

# 3.23: n個組の要素の列挙
- n=0, 1要素: ()
- n=1, 2要素: (0), (1)
- n=2, 4要素: (0,0), (0,1), (1,0), (1,1)
- n=3, 8要素: (0,0,0),(0,0,1),(0,1,0),(0,1,1),(1,0,0),(1,0,1),(1,1,0),(1,1,1)

# 3.24: 3変数の写像の総数
入力は 2^3 = 8 通りある。各入力に 2値を割り振る自由度があるので、2^8 = 256 通り

# 3.27: 解釈の同一性
証明すべき内容「解釈I, Jが任意の原子命題に対して同じ値を値付けるとき、IとJは同一」。論理式に関する帰納法を用いる。

Step1: 任意の原子命題 P に対して、〖P〗@I = 〖P〗@J なのは仮定から自明。 

Step2: n項真理関数ρ, n個の式 α1, α2, ...αn に対し I,J が同じ値 a1, a2, ..., an を与えるとする。この時〖ρ(α1, α2, ...)〗@I = 〖ρ〗 (a1, a2,..., an) = 〖ρ(α1, α2, ...)〗@J

Step1,2 により、帰納的に任意の式に対して I, J は同じ値を値付ける。(注：真理関数（具体的には￢∧∨など）の解釈(=ブール関数の割り当て)が I, Jで一致していることを前提にしているが、通常それは正当化される)

# 3.28: 命題の取りうる値
Step1: 定義より、任意の原子命題 Pに対し 〖P〗∈ Dt。

Step2: 任意のn項真理関数ρ を考える。n個の式(α1,...αn)が全て0 or 1を値に持つとすると、〖ρ(α1,...αn)〗= 〖ρ〗(a1, a2,...an) ∈ Dt （参考：3.26 のρの定義）。

Step1,2 より 任意の式はDtの要素を値に持つ。

# 3.31: 0項真理関数の数
2種類。常に1を値付ける関数と、常に0を値付ける関数。

# 3.35: 1項真理関数の数
Dt → Dt の写像なので、4種類。

# 3.36: 1項真理関数の列挙
f(0)=a, f(1)=b なる関数を (ab) と略記するとすると 以下の四つ

- ￢: (10)
- 常にTrue: (11)
- 常にfalse: (00)
- 恒等関数: (01)

# 3.39: 2項真理関数の数
2^4 = 16通り。

# 3.40: n項真理関数の数
2^(2^n) 通り。

# 3.42: 真偽値表
とりあえず片方のみ

```
PQR |(P ∧￢Q) → R
111 | 1 0 0   1 1
110 | 1 0 0   1 0   
101 | 1 1 1   1 1
100 | 1 1 1   0 0 
011 | 0 0 0   1 1
010 | 0 0 0   1 0
001 | 0 0 1   1 1
000 | 0 0 1   1 0
```

# 3.44 恒真式の真偽値表
二重否定除去を例に

```
P | P ↔ ￢￢P
0 | 0 1  0  
1 | 1 1  1
```

# 3.45 恒真性の判定
一つだけピックアップ

```
P Q | ￢P → (P → Q)
1 1 | 0  1  1  1 1
1 0 | 0  1  1  0 0
0 1 | 1  1  0  1 1
0 0 | 1  1  0  1 0
```

# 3.47 括弧省略の経済性
カタラン数 (2n!) / (n+1)(n!)^2 となる。証明は非常に長く煩雑であるので「括弧　カタラン数」で検索するとよい。

# 3.52 空列と意味論的含意
「⊨φ ⇔ ⊤⊨φ」⇒の証明: ⊤が1に値付けされる解釈 I すべてにおいて（⊤は任意の解釈で1に値付けられるので I は結局任意の解釈となる）、φの恒真性（前提）から0に値付けられることはない。⇐の証明：前提より ⊤が1 に値付けられるときは いつも φは 1に値付けられる。ところで⊤は任意の解釈で 1に値付けられるので、φも任意の解釈で 1 に値付けられる。よってφは恒真式。

「Γ⊨ ⇔ Γ⊨⊥」⇒の証明： Γ⊨⊥の定義は「Γの元を同時に1に値付け かつ⊥を0に値付ける解釈は存在しない」となるが前提よりそもそも Γは同時に1に値付けできないので肯定された。⇐の証明：前提Γ⊨⊥の定義は前述の通りであるが、⊥はどんな解釈でも0に値付けられるので結局前提は「Γの元を同時に1に値付けする解釈は存在しない」となって、これはΓの矛盾性を示す。

# 3.53: 空列と空列
しない。定義に従うと '⊨' は「解釈は存在しない」となるから。

# 3.54: 意味の違い
- 比較元A: φ1,φ2, ... φn ⊨ 
- 比較先X: φ1,φ2, ... φn はいずれも矛盾式である
- 比較先Y: φ1,φ2, ... φn には矛盾式が含まれる
- 比較先Z: φ1,φ2, ... φn に含まれる任意の二つの論理式は矛盾している

AとXの比較 ＆ AとYの比較：A ではφ1,...φn に矛盾式がないこともあり得る。もっと言えば一つたりとも矛盾式が含まれないこともありうる。Aを満たすがX,Yを満たさない例: φ1 = P, φ2 = ￢P

AとZの比較: 2つでは充足するが3つで充足しないということも考えられる。Aを満たすがZを満たさない例: φ1: P, φ2: Q, φ3: ￢P∨￢Q, ... (φ1とφ2は矛盾しない)

# 3.58: 充足不能性と帰結
「Γ⊨Δ ⇔ Γ,￢Δ が充足不能」⇒の証明: 前提よりΓの元全てが1に値付けされているときはいつもΔは（0でないすなわち）1に値付けられており、したがって￢Δはいつも0に値付けられている。よってΓと￢Δを同時に充足できない。⇐の証明：前提より、もし仮にΓを充足する解釈があった場合、その解釈の下では ￢Δは充足しないが、これは（Δは高々1なので）Δが充足することを示す。

# 3.59: 真偽値表と推論

```
PQR ABZ <<前提: A: P→Q, B: Q→R , 帰結: Z: P→R>>
111 111 OK
110 100 この行は無視してよい（前提が充足していない）
101 011 この行は無視してよい（前提が充足していない） 
100 010 この行は無視してよい（前提が充足していない）
011 111 OK
010 101 この行は無視してよい（前提が充足していない）
001 111 OK
000 111 OK
```

```
PQR ABZ <<前提: A: P∨Q, B: ￢（P∧R）, 帰結: Z: R→Q>>
111 101 無視
110 111 OK
101 100 無視
100 111 OK
011 111 OK
010 111 OK
001 010 無視
000 011 無視
```

以下の問題は誤植じゃないかな？

```
PQR ABZ <<前提: A: P→Q∨R, B: R→￢P, 帰結: Z: P↔Q>>
111 101 無視
110 111 OK
101 100 無視
100 010 無視
011 110 NG
010 110 NG
001 111 OK
000 111 OK
```

多分これは「P→Q∨R, R→￢P ⊨ P→Q」ではないだろうか？「Pを仮定するとQ もしくは R に行けるんだけど、もし R に行けたとすると ￢P にたどり着いてしまうので（一つ目の仮定Pと）不整合を起こすので、実質 Q にしか行けない。

# 3.63: ≡は同値関係

反射律の証明：つまり「任意のφに関してφ≡φであるか？」を示せばよいが、φ⊨φ が成立するので明らかに従う。

対称律の証明：つまり「φ≡ψなら、ψ≡φか？」を示す。前提より φ⊨ψ と ψ⊨φ が成立する。よって直ちに従う。

推移律の証明：つまり、「φ≡ψ, ψ≡χ なら ψ≡χか？」を示す。前提より 〖φ〗=〖ψ〗, 〖ψ〗=〖χ〗。よって〖φ〗=〖χ〗。よって φ≡χ。

# 3.64: ⊨ は半順序関係
反射律の証明: x ⊨ x は自明に従う。

反対称律の証明: x ⊨ y かつ y ⊨ x を仮定する。これは正に x と y の意味論的同値関係である。よって、≡を法として x と y は同一である。

推移性の証明: x ⊨ y かつ y ⊨ z を仮定する。x を充足する任意の解釈I において y は充足するが、（y⊨z より）yが充足する際には z は必ず充足するので、解釈I の下でも z は充足する。

# 3.66: ↔と≡の関係
「φ≡ψ」⇔「任意の解釈で〖φ〗=〖ψ〗」⇔「任意の解釈で〖φ↔ψ〗= 1」⇔「⊨φ↔ψ」 

# 3.71: 置換で式変形
￢(((P∨Q)∨R)∨S) ≡ ￢((P∨Q)∨R)∧￢S ≡ ￢(P∨Q)∧￢R∧￢S ≡ ((￢P∧￢Q)∧￢R)∧￢S

# 3.73: 置換で式変形
- 1問目: 左辺 = P→￢￢Q ≡ ￢P∨￢￢Q ≡ ￢P∨Q = 右辺
- 2問目: 左辺 = P∨￢(Q∨R) ≡ P∨(￢Q∧￢R）≡(P∨￢Q)∧(P∨￢R) = 右辺
- 3問目: 右辺 = ￢(￢P∨￢Q) ≡ ￢￢P∧￢￢Q ≡ P∧Q = 左辺

# 3.80: 演繹定理で妥当性確認
まじめに演繹定理を使って右辺に全部持って行って真偽値表を書いて恒真式かどうかの判定をしてもよいが、少し工夫をする。

1問目: ￢S∨P ≡ S→P であるので演繹定理より（推論） ⇔ 「Q→S, S→P, P→R→￢Q ⊨ ￢R」⇔ 「⊨ (Q→S)∧(S→P)∧(P→R→￢Q)→￢R」⇒「⊨ (Q→P)∧(P→R→￢Q)→￢R」⇒「⊨ (Q→R→￢Q)→￢R」⇔「⊨ (Q→Q→￢R)→￢R」となるが、（真偽値表を書き出すとわかるように）これは成立しないので妥当でない推論だ。具体的には、P=0, Q=0, R=1, R=0 なる解釈において前提は充足するが、結論は充足しない。

2問目:前提に存在する P∧￢S に注目すると、前提を充足する解釈として P=1, S=0 なる解釈のみを考えれば十分である。その制限の中では、R→S を充足するためには R=0 なる解釈しかありえない。その元で P∧Q→R∨S を充足する解釈としては(R∨SはR=S=0なので充足しないので）Q=0なる解釈しかありえない。したがって前提全てを充足する解釈は P=1, Q=0, R=0, S=0 の1通りしか存在しない。この解釈の下では￢Q は充足する□

3問目: 推論の帰結は P→Q→S なので、演繹定理を使って P, Qを左辺（前提）に持っていく。また前提において X = T→U とおくと記号を一つ減らせる。後は2問目と同様に示せる。（推論）⇔「P, Q, P∧Q→R, ￢S→X, R→￢X ⊨ S」。前提を充足する解釈として P=Q=1 なる解釈のみを考えれば十分。その元でP∧Q→R を充足させるためには R=1 なる解釈のみを考えれば十分。そのうえで R→￢X を充足させるためには X=0 なる解釈のみを考えれば十分。その元で￢S→X を充足させるためにはS=1なる解釈のみを考えれば十分。以上より、前提を充足する解釈は P=Q=R=S=1 かつ T→U を充足させる必要がある。その制限の下では結論である S は必ず充足される□

# 3.84: カットの例
以下のように形式化する「P:身内の犯行である、Q:貞夫が犯人である、R:光江が犯人である、S:犯人は財産目当てである」

妥当性チェック対象の推論はこうなる「P→Q∨R, Q→￢S, S→￢R ⊨ P→￢S」演繹定理を使って結論のPを左辺にもってくると「P, P→Q∨R, Q→￢S, S→￢R　⊨ ￢S」ここで、S→￢R に対偶律を使ってR→￢S となる。「P, P→Q∨R, Q→￢S, R→￢S ⊨ ￢S」よってほとんど自明に従うが、題意に従った方法（証明論的なアプローチ）でやろう。

妥当性を示すべき推論: P, P→Q∨R, Q→￢S, S→￢R ⊨ ￢S

```
01) Q∨R, Q∨R→￢S ⊨ ￢S [MP]
02) P, P→Q∨R ⊨ Q∨R [MP]
03) P, P→Q∨R, Q∨R→￢S ⊨ ￢S [カット 01 by 02]
04) Q→￢S, R→￢S ⊨ Q∨R→￢S [構成的両刃]
05) P, P→Q∨R, Q→￢S, R→￢S ⊨ ￢S [カット 03 by 04]
06) S→￢R ≡ ￢￢R →￢S [対偶律]
07) ￢￢R ≡ R [二重否定律]
08) S→￢R ≡ R→￢S [置き換え]
09) S→￢R ⊨ R→￢S [推移律]
10) P, P→Q∨R, Q→￢S, S→￢R ⊨ ￢S [カット 05 by 09] 
```

# 3.87: 証明
仮定に演繹定理を使って φ⊨ψ。この φ に(もう一つの仮定より)カットが使えて ⊨ψ

# 3.89: 背理法の証明
「φ, Γ ⊨⊥」⇔「φ, Γ ⊨」 ⇔「φ, Γが充足不能」⇔「￢￢φ, Γが充足不能」⇔「Γ ⊨ ￢φ」

# 3.91: 日常の推論
以下のように記号化する「A: 真偽値表が出題される、B: 背理法が出題される、C: カットが出題される」。チェックすべき推論は「￢A→B, C∨￢B, ￢(￢A∧￢C) ⊨ A」そのために、帰結の否定である￢A を前提に加え、その充足性を考える。

￢A を充足させるには A=0 なる解釈である必要があり、その元で￢A→B を充足させるには B=1 なる解釈である必要があり、その元でC∨￢Bを充足させるためには C=1 である必要があるが、この解釈の下では、￢(￢A∧￢C)は 1になるので充足できる。

以上、{前提,￢A} は充足可能であるので妥当な推論でない(反例: A=0, B=1, C=1)

# 3.94: 0項真理関数のCNF/DNF
- true()のDNF: (P∧Q)∨(P∧￢Q)∨(￢P∧Q)∨(￢P∧￢Q)
- true()のCNF: なし
- false()のDNF: なし
- false()のCNF: (￢P∨￢Q)∧(￢P∨Q)∧(P∨￢Q)∧(P∨Q)

# 3.95: DNF/CNF に同値変形
P,Q,Rの値がa,b,cとなる解釈をabc と表記する。

1問目: ￢R∧(P↔Q)を充足するのは 110 と 000 のみ。￢(Q→P)≡￢P∧Qを充足するのは 01*。よって 110, 010, 011, 000 が与式を充足する。よって DNFは (P∧Q∧￢R)∨(￢P∧Q∧￢R)∨（￢P∧Q∧R）∨(￢P∧￢Q∧￢R)。逆に充足しないのは 111, 101, 100, 001 であるので、CNFは (￢P∨￢Q∨￢R)∧(￢P∨Q∨￢R)∧(￢P∨Q∨R)∧(P∨Q∨￢R)。

2問目: P∧(Q↔R) を充足するのは 111, 100で、￢(P∨Q↔R) ≡ ￢P∧￢(Q↔R) を充足するのは 010, 001。よって与式を充足するのは 111, 100, 010, 001。対応するDNFは (P∧Q∧R)∨(P∧￢Q∧￢R)∨(￢P∧Q∧￢R)∨(￢P∧￢Q∧R)。与式を充足しないのは 110, 101, 011, 000 なのでCNFは (￢P∨￢Q∨R)∧(￢P∨Q∨￢R)∧(P∨￢Q∨￢R)∧(P∨Q∨R)。

3問目: ￢(P→Q) ≡ P∧￢Q を充足するのは 10*, (P↔R)∧Q を充足するのは 111, 010。よって与式を充足するのは 111, 101, 100, 010 よりDNFは (P∧Q∧R)∨(P∧￢Q∧R)∨(P∧￢Q∧￢R)∨(￢P∧Q∧￢R)。充足しないのは 110, 011, 001, 000 よりCNFは (￢P∨￢Q∨R)∧(P∨￢Q∨￢R)∧(P∨Q∨￢R)∧(P∨Q∨R)。

4問目: 充足しないのは 111, 100, 010, 001。充足するのはその逆で 110, 101, 011, 000。DNFは (P∧Q∧￢R)∨(P∧￢Q∧R)∨(￢P∧Q∧R)∨(￢P∧￢Q∧￢R)。CNFは (￢P∨￢Q∨￢R)∧(￢P∨Q∨R)∧(P∨￢Q∨￢R)∧(P∨Q∨￢R)。

# 3.101: ∧と∨を互いで定義

```
PQ ￢P∧￢Q, その否定  | ￢P∨￢Q, その否定
11 0         1          0         1 
10 0         1          1         0
01 0         1          1         0
00 1         0          1         0
```
# 3.103: 表現適格性をめぐる色々
1) P→Q ≡ ￢P∨Q ≡ ￢(￢￢P∧￢Q) ≡ ￢(P∧￢Q)
2) P→Q ≡ ￢P∨Q
3) 真偽値表を眺めて気合で見つける: (P→Q)→Q
4) 真偽値表を眺めて気合で見つける: (P→Q)↔Q
5) 変数記号P, Qのみを含む式 φ に関する性質E「φを1に値づける解釈の総数が2以上存在する」としよう。Step1. PおよびQは性質E を満たす。Step2. α, βが性質E を満たすとすると、α→β及びβ→αも性質E を満たす（→の真偽値表を見れば明らかに→の右側の論理式の1はそのまま結果に引き継がれる）。以上Step1,2 より帰納的に、「→のみを使って構成した式は性質Eを満たす」事が言える。一方P∧Q は性質E を満たさない。よってP∧Qは→のみを使って表現できない。

# 3.106: 別の適格性
問題で示された記号を 〆 とする。

1) P∧Q ≡ (P〆Q)〆Q である。よって {￢, 〆} で ∧ を表現できる。{￢, ∧} は表現的に適格なのでOK。
2) (P→Q)〆Q は恒偽。よって {→,〆} で ⊥ を表現できたので、{→,〆}は表現的に適格
3) 1)ですでに示した。

# 3.107: 1項真理関数では表現不適格な理由
異なる変数同士を関連づけれないから。
